# 项目运行指南

## 环境要求

- Node.js (推荐 v16 或更高版本)
- MongoDB (本地安装并运行)
- npm 或 yarn

## 快速启动

### 方法一：一键启动（推荐）
```bash
# 同时启动前端和后端服务
npm run dev:full
```

### 方法二：分别启动
```bash
# 终端1 - 启动后端服务器
npm run server

# 终端2 - 启动前端开发服务器
npm run dev
```

### 方法三：使用批处理文件（Windows）
```bash
# 双击运行批处理文件
start-server.bat
```

## 详细步骤

### 1. 安装依赖
```bash
npm install
```

### 2. 启动MongoDB
确保MongoDB服务正在运行：
```bash
# Windows (如果MongoDB作为服务安装)
net start MongoDB

# 或者直接运行mongod
mongod --dbpath "你的数据库路径"
```

### 3. 启动后端服务器
```bash
npm run server
```
成功启动后会看到：
```
MongoDB连接成功
服务器运行在端口 3001
```

### 4. 启动前端开发服务器
```bash
npm run dev
```

### 5. 访问应用
- 前端地址：http://localhost:5173
- 后端API：http://localhost:3001/api/food

## 故障排除

### 问题1：ERR_CONNECTION_REFUSED
**原因**：后端服务器未启动
**解决**：
```bash
npm run server
```

### 问题2：MongoDB连接失败
**原因**：MongoDB服务未启动
**解决**：
```bash
# 启动MongoDB服务
net start MongoDB
# 或
mongod
```

### 问题3：端口被占用
**检查端口占用**：
```bash
# 检查3001端口
netstat -an | findstr :3001

# 检查5173端口
netstat -an | findstr :5173
```

**终止占用进程**：
```bash
# 查找进程ID
tasklist | findstr node

# 终止进程
taskkill /PID 进程ID /F
```

## 项目结构
```
testDemo2/
├── src/                    # 前端源码
│   └── components/
│       └── layout/
│           └── Head.vue    # 主要组件
├── server/                 # 后端源码
│   ├── app.js             # 服务器入口
│   ├── models/            # 数据模型
│   └── routes/            # API路由
├── package.json           # 项目配置
└── start-server.bat       # Windows启动脚本
```

## API端点
- `GET /api/food` - 获取所有食材
- `GET /api/food/search?q=关键词` - 搜索食材
- `GET /api/food/suggestions?q=关键词` - 获取搜索建议

## 开发模式
```bash
# 开发模式（热重载）
npm run dev:full
```

## 生产构建
```bash
# 构建前端
npm run build

# 预览构建结果
npm run preview
```